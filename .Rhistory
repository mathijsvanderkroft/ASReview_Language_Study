units = 'px')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_2_sets.pdf",
plot = last_plot(),
width = 1920,
units = 'px')
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_4_sets.pdf",
plot = last_plot(),
width = 1920 * 2,
units = 'px')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_2_sets.pdf",
plot = last_plot(),
width = 1920 * 2,
units = 'px')
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_4_sets.png",
plot = last_plot(),
width = 1920 * 2,
units = 'px')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_2_sets.png",
plot = last_plot(),
width = 1920 * 2,
units = 'px')
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_4_sets.png",
plot = last_plot(),
#width = 1920 * 2,
units = 'px')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_2_sets.png",
plot = last_plot(),
#width = 1920 * 2,
units = 'px')
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_4_sets.png",
plot = last_plot(),
width = 20,
height = 30,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_2_sets.png",
plot = last_plot(),
width = 20,
height = 10,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_4_sets.png",
plot = last_plot(),
width = 20,
height = 20,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_2_sets.png",
plot = last_plot(),
width = 20,
height = 10,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_4_sets.png",
plot = last_plot(),
width = 20,
height = 15,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_2_sets.png",
plot = last_plot(),
width = 20,
height = 10,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_4_sets.png",
plot = last_plot(),
width = 20,
height = 16,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ggsave(
"scatter_2_sets.png",
plot = last_plot(),
width = 20,
height = 8,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ratio = 16/20
width = 15
ggsave(
"scatter_4_sets.png",
plot = last_plot(),
width = width,
height = width * ratio,
dpi = 600,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ratio = 7/20
ggsave(
"scatter_2_sets.png",
plot = last_plot(),
width = width,
height = width * ratio,
dpi = 600,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ratio = 16/20
width = 18
ggsave(
"scatter_4_sets.png",
plot = last_plot(),
width = width,
height = width * ratio,
dpi = 600,
units = 'cm')
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ratio = 7/20
ggsave(
"scatter_2_sets.png",
plot = last_plot(),
width = width,
height = width * ratio,
dpi = 600,
units = 'cm')
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(tidyverse)
library(readxl)
df <- read.csv("C:/Users/mijnn/Desktop/Data_Science/Thesis/language_study/metrics_analysis_seeded.csv", check.names = FALSE)
df[df == "multilingual_post"] <- "sbert"
df[df == "ACEInhibitors"] <- "ACE"
df[df == "Kwok_2020"] <- "Virus"
df[df == "Hall_2012"] <- "Software"
df[df == "Appenzeller-Herzog_2020"] <- "Wilson"
df[df == "Nagtegaal_2019"] <- "Nudging"
df[df == "van_de_Schoot_2017"] <- "PTSD"
adt_test <- function(df1, df2){
test = t.test(
df1 %>% select('ATD'),
df2 %>% filter(language =='EN') %>%
filter(feature_extractor==df1$feature_extractor[1]) %>%
filter(dataset==df1$dataset[1]) %>%
select('ATD')
)
return(data.frame(ATD = round(test$estimate[1], 2),
ATD_EN = round(test$estimate[2], 2),
difference = round(test$estimate[1] - test$estimate[2], 2),
p_value = test$p.value))
}
df_MRL <- df %>% filter(language %in% c('DE', 'ES', 'TR'))%>%
group_by(dataset, language, feature_extractor) %>%
group_modify(~ adt_test(.x, df),
.keep=TRUE)
df_MRL_EN <- df %>% filter(language %in% c('DE_EN', 'ES_EN', 'TR_EN'))%>%
group_by(dataset, language, feature_extractor) %>%
group_modify(~ adt_test(.x, df),
.keep=TRUE)
View(df)
View(df_atd)
View(df_MRL)
ggplot(df_MRL %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ratio = 16/20
width = 18
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
colnames(df_MRL)[colnames(df_MRL) %in% c("feature_extractor", "ATD", "ATD_EN", "difference")] <-
c("feature extractor", "ATD", "ATD EN", "difference in ATD")
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
df_MRL = df_MRL %>% mutate(`p < 0.05` = if_else(p_value < 0.05, TRUE, FALSE))
ggplot(df_MRL %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ratio = 7/20
ggsave(
"scatter_2_sets_seeded.png",
plot = last_plot(),
width = width,
height = width * ratio,
dpi = 600,
units = 'cm')
adt_test <- function(df1, df2){
test = t.test(
df1 %>% select('ATD'),
df2 %>% filter(language =='EN') %>%
filter(feature_extractor==df1$feature_extractor[1]) %>%
filter(dataset==df1$dataset[1]) %>%
select('ATD')
)
return(data.frame(ATD = round(test$estimate[1], 2),
ATD_EN = round(test$estimate[2], 2),
difference = round(test$estimate[1] - test$estimate[2], 2),
p_value = test$p.value))
}
df_MRL <- df %>% filter(language %in% c('DE', 'ES', 'TR'))%>%
group_by(dataset, language, feature_extractor) %>%
group_modify(~ adt_test(.x, df),
.keep=TRUE)
df_MRL_EN <- df %>% filter(language %in% c('DE_EN', 'ES_EN', 'TR_EN'))%>%
group_by(dataset, language, feature_extractor) %>%
group_modify(~ adt_test(.x, df),
.keep=TRUE)
df <- read.csv("C:/Users/mijnn/Desktop/Data_Science/Thesis/language_study/metrics_analysis.csv", check.names = FALSE)
df[df == "multilingual_post"] <- "sbert"
df[df == "ACEInhibitors"] <- "ACE"
df[df == "Kwok_2020"] <- "Virus"
df[df == "Hall_2012"] <- "Software"
df[df == "Appenzeller-Herzog_2020"] <- "Wilson"
df[df == "Nagtegaal_2019"] <- "Nudging"
df[df == "van_de_Schoot_2017"] <- "PTSD"
adt_test <- function(df1, df2){
test = t.test(
df1 %>% select('ATD'),
df2 %>% filter(language =='EN') %>%
filter(feature_extractor==df1$feature_extractor[1]) %>%
filter(dataset==df1$dataset[1]) %>%
select('ATD')
)
return(data.frame(ATD = round(test$estimate[1], 2),
ATD_EN = round(test$estimate[2], 2),
difference = round(test$estimate[1] - test$estimate[2], 2),
p_value = test$p.value))
}
df_MRL <- df %>% filter(language %in% c('DE', 'ES', 'TR'))%>%
group_by(dataset, language, feature_extractor) %>%
group_modify(~ adt_test(.x, df),
.keep=TRUE)
df_MRL_EN <- df %>% filter(language %in% c('DE_EN', 'ES_EN', 'TR_EN'))%>%
group_by(dataset, language, feature_extractor) %>%
group_modify(~ adt_test(.x, df),
.keep=TRUE)
# View(df_MRL[order(df_MRL$difference),] %>% filter(p < 0.05))
colnames(df_MRL)[colnames(df_MRL) %in% c("feature_extractor", "ATD", "ATD_EN", "difference")] <-
c("feature extractor", "ATD", "ATD EN", "difference in ATD")
colnames(df_MRL_EN)[colnames(df_MRL_EN) %in% c("feature_extractor", "ATD", "ATD_EN", "difference")] <-
c("feature extractor", "ATD", "ATD EN", "difference in ATD")
# create T/F column for p_value < 0.05
df_MRL = df_MRL %>% mutate(`p < 0.05` = if_else(p_value < 0.05, TRUE, FALSE))
?t.test
adt_test <- function(df1, df2){
test = t.test(
df1 %>% select('ATD'),
df2 %>% filter(language =='EN') %>%
filter(feature_extractor==df1$feature_extractor[1]) %>%
filter(dataset==df1$dataset[1]) %>%
select('ATD')
)
return(data.frame(ATD = round(test$estimate[1], 2),
ATD_EN = round(test$estimate[2], 2),
difference = round(test$estimate[1] - test$estimate[2], 2),
SEM = round(test$stderr, 4),
p_value = test$p.value))
}
df_MRL <- df %>% filter(language %in% c('DE', 'ES', 'TR'))%>%
group_by(dataset, language, feature_extractor) %>%
group_modify(~ adt_test(.x, df),
.keep=TRUE)
df_MRL_EN <- df %>% filter(language %in% c('DE_EN', 'ES_EN', 'TR_EN'))%>%
group_by(dataset, language, feature_extractor) %>%
group_modify(~ adt_test(.x, df),
.keep=TRUE)
# View(df_MRL[order(df_MRL$difference),] %>% filter(p < 0.05))
colnames(df_MRL)[colnames(df_MRL) %in% c("feature_extractor", "ATD", "ATD_EN", "difference")] <-
c("feature extractor", "ATD", "ATD EN", "difference in ATD")
colnames(df_MRL_EN)[colnames(df_MRL_EN) %in% c("feature_extractor", "ATD", "ATD_EN", "difference")] <-
c("feature extractor", "ATD", "ATD EN", "difference in ATD")
# create T/F column for p_value < 0.05
df_MRL = df_MRL %>% mutate(`p < 0.05` = if_else(p_value < 0.05, TRUE, FALSE))
write.csv(df_MRL[order(df_MRL$`difference in ATD`),] %>% filter(p_value < 0.05), "ATD_MRL_compared_to_EN.csv",  row.names = FALSE)
write.csv(df_MRL_EN[order(df_MRL_EN$`difference in ATD`),] %>% filter(p_value < 0.05), "ATD_MRL_EN_compared_to_EN.csv",  row.names = FALSE)
write.csv(df_MRL[order(df_MRL$`difference in ATD`),], "ATD_MRL_compared_to_EN_unfilt.csv",  row.names = FALSE)
write.csv(df_MRL_EN[order(df_MRL_EN$`difference in ATD`),], "ATD_MRL_EN_compared_to_EN_unfilt.csv",  row.names = FALSE)
ggplot(df_MRL_EN %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
df_MRL_EN = df_MRL_EN %>% mutate(`p < 0.05` = if_else(p_value < 0.05, TRUE, FALSE))
ggplot(df_MRL_EN %>% filter(dataset %in% c('ACE', 'Nudging', 'Virus', 'Wilson')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ratio = 16/20
width = 18
ggsave(
"scatter_4_sets_EN.png",
plot = last_plot(),
width = width,
height = width * ratio,
dpi = 600,
units = 'cm')
ggplot(df_MRL_EN %>% filter(dataset %in% c('PTSD', 'Software')), aes(x=`ATD`, y=`ATD EN`, color=`feature extractor`, shape=`p < 0.05`)) +
coord_fixed() +
geom_abline(color="grey", linetype="dashed", intercept=0, slope=1) +
geom_point() +
facet_grid(cols=vars(language),
rows=vars(dataset)) +
scale_shape_manual(values=c(4,19)) +
xlab("ATD translation (%)") +
ylab("ATD original (%)")
ratio = 7/20
ggsave(
"scatter_2_sets_EN.png",
plot = last_plot(),
width = width,
height = width * ratio,
dpi = 600,
units = 'cm')
write.csv(df_MRL[order(df_MRL$`difference in ATD`),], "figures/ATD_compared/ATD_MRL_compared_to_EN.csv",  row.names = FALSE)
write.csv(df_MRL[order(df_MRL$`difference in ATD`),], "figures/ATD_compared/ATD_MRL_compared_to_EN.csv",  row.names = FALSE)
